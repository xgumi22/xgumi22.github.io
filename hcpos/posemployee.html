<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>High-Coffee: POS</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
</head>
<body class="hold-transition dark-mode sidebar-mini sidebar-collapse layout-fixed layout-navbar-fixed layout-footer-fixed">
<!-- Site wrapper -->
<div class="wrapper">
  
  <!-- Main Sidebar Container -->
  <aside class="main-sidebar main-sidebar-custom sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="index.html" class="brand-link">
      <img src="dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">High-Coffee</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="dist/img/avatar5.png" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block">Mariñas Dev</a>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

          <li class="nav-item">
            <a href="pos.html" class="nav-link active">
              <i class="nav-icon fas fa-terminal"></i>
              <p>
                POS
                <!-- <span class="right badge badge-danger">New</span> -->
              </p>
            </a>
          </li>

          <li class="nav-item">
            <a href="#" class="nav-link">
             <i class="nav-icon fas fa-sign-out-alt fa-lg"></i>
            <p>Signout</p>
     </a>
          </li>
          
         
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    
    <!-- /.sidebar-custom -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">

    </section>

    <!-- Main content -->
    <section class="content">

      <div class="container-fluid">
        <div class="row">
          <!-- Categories -->
          <div class="col-2">
            <div class="card mb-2">
              <div class="card-header" style="text-align: center;" onclick="openTab(event, 'tab1')">
                
                <img src="dist/img/nacho.jpg" class="card-img"><p><b>Foods</b></p>
              </div>
            </div>

            <div class="card mb-2">
              <div class="card-header" style="text-align: center;" onclick="openTab(event, 'tab2')">
                <img src="dist/img/icecoffee.jpg" class="card-img"><p><b>Drinks</b></p>
              </div>
            </div>

            <div class="card mb-2">
              <div class="card-header" style="text-align: center;" onclick="openTab(event, 'tab3')">
                <img src="dist/img/avatar2.png" class="card-img"><p><b>Category 3</b></p>
              </div>
            </div>

            
          </div>

          <!-- Selection Box -->
          <div class="col-6">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">High-Coffee: POS</h3>
              </div>

              <div class="card-body">
                
                <div class="row" id="itemList">

                  <!-- Category 1 -->

                  <div id="tab1" class="tab-content active"> 

                  <h3 class="card-title" id="cat1">Foods</h3><br>
                  <div class="row" style="justify-content: center">
                    <div class="card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/wings.jpg" class="card-img" ></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>Chicken Wings</b></p>
                  <p style="margin: 0"><b>PHP 100</b></p>
                  <button class="itembtn btn btn-success btn-tool">Add Item</button>

                </div>
                
                    </div>


                    <div class="card col-3" style="text-align: center; margin: 5px">
                      
                      <div class="card-header"><img src="dist/img/nacho.jpg" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>Nacho</b></p>
                  <p style="margin: 0"><b>PHP 75</b></p>
                  <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>


                    <div class="card col-3" style="text-align: center; margin: 5px">
                      
                      <div class="card-header"><img src="dist/img/default-150x150.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>Coming Soon</b></p>
                  <!-- <p style="margin: 0"><b>PHP 50</b></p>
                  <button class="itembtn btn btn-success btn-tool">Add Item</button> -->

                </div>
                
                    </div>
                  </div>

                  </div>


                  <!-- Category 2 -->

                  <div id="tab2" class="tab-content" style="display: none"> 

                  <h3 class="card-title" id="cat2">Drinks</h3><br>

                  <div class="row mb-2" style="justify-content: center">
                    <div class="itembtn drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="itembtn card-header"><img src="dist/img/matcha.jpg" class="itembtn card-img"></div>
                      
                      <div class="itembtn card-body"><p style="margin: 0"><b>Matcha</b></p>
                  <!-- <p style="margin: 0"><b>PHP 25</b></p> -->
                </div>
                
                    </div>


                    <div class="itembtn drinks card col-3" style="text-align: center; margin: 5px">
                      
                      <div class="itembtn card-header"><img src="dist/img/hotcoffee.png" class="itembtn card-img"></div>
                      
                      <div class="itembtn card-body"><p style="margin: 0"><b>Hot Coffee</b></p>
                  <!-- <p style="margin: 0"><b>PHP 55</b></p> -->
                </div>
                
                    </div>


                    <div class="itembtn drinks card col-3" style="text-align: center; margin: 5px">
                      
                      <div class="itembtn card-header"><img src="dist/img/icecoffee.jpg" class="itembtn card-img"></div>
                      
                      <div class="itembtn card-body"><p style="margin: 0"><b>Iced Coffee</b></p>
                  <!-- <p style="margin: 0"><b>PHP 75</b></p> -->
                </div>
                
                    </div>

                  </div>

                  <div class="row" id="cupSizeSection">

                    <!--

                      SHOW CUPSIZE HERE WHEN ITEM IS CLICKED

                    -->
                    
                  </div>

                </div>
                    
                  <!-- Category 3 -->

                  <div id="tab3" class="tab-content" style="display: none"> 

                  <h3 class="card-title" id="cat3">Category 3</h3><br>

                  <div class="row" style="justify-content: center;">
                    <div class="itembtn card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="itembtn card-header"><img src="dist/img/avatar4.png" class="itembtn card-img"></div>
                      
                      <div class="itembtn card-body"><p style="margin: 0"><b>Food 1</b></p>
                  <!-- <p style="margin: 0"><b>PHP 25</b></p> -->
                </div>
                
                    </div>


                    <div class="itembtn card col-3" style="text-align: center; margin: 5px">
                      
                      <div class="itembtn card-header"><img src="dist/img/avatar4.png" class="itembtn card-img"></div>
                      
                      <div class="itembtn card-body"><p style="margin: 0"><b>Food 2</b></p>
                  <!-- <p style="margin: 0"><b>PHP 55</b></p> -->
                </div>
                
                    </div>


                    <div class="itembtn card col-3" style="text-align: center; margin: 5px">
                      
                      <div class="itembtn card-header"><img src="dist/img/avatar4.png" class="itembtn card-img"></div>
                      
                      <div class="itembtn card-body"><p style="margin: 0"><b>Food 3</b></p>
                  <!-- <p style="margin: 0"><b>PHP 75</b></p> -->
                </div>
                
                    </div>
                  </div>

                </div>

                  <!-- End of Category -->

                </div>
                

              </div>
            </div>
            <!-- /.card -->
          </div>

          <div class="col-4">

            <form>
              <div class="input-group mb-2">
              <input type="text" name="idsearch" placeholder="ID No." class="form-control">
              <span class="input-group-append">
                <button type="button" class="btn btn-info">Search</button>
              </span>
            </div>
            </form>


<div id="printContent">
              <input type="text" name="customername" placeholder="Enter Name" class="form-control mb-2">
              <div class="custom-control custom-radio">
                          <input class="custom-control-input" type="radio" id="dinein" name="dine" value="Dine-In">
                          <label for="dinein" class="custom-control-label">Dine-In</label>
                        </div>
                        <div class="custom-control custom-radio">
                          <input class="custom-control-input" type="radio" id="takeout" name="dine" value="Take-Out">
                          <label for="takeout" class="custom-control-label">Take-Out</label>
                        </div>

            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Selected Items</h3>
              </div>
              <div class="card-body" id="selectedItemsCard">
                
                <div class="card">

                   <div class="input-group">
                    <div class="input-group-prepend">
                    <span class="input-group-text">Item 1</span>
                  </div>
                  <div class="input-group-prepend">
                    <span class="input-group-text">PHP </span>
                  </div>
                  <input type="text" name="price" readonly min=1 value="150" class="form-control item-price">
                  <input type="number" name="count" min="1" value="1" class="form-control item-quantity">
                  <input type="hidden" name="subtotal" class="form-control item-subtotal" readonly>
                  <span class="input-group-append">
                     <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                  </span>
                 
                </div>
                </div>

                <div class="card">

                   <div class="input-group">
                    <div class="input-group-prepend">
                    <span class="input-group-text">Item 2</span>
                  </div>
                  <div class="input-group-prepend">
                    <span class="input-group-text">PHP </span>
                  </div>
                  <input type="text" name="price" readonly min=1 value="50" class="form-control item-price">
                  <input type="number" name="count" min="1" value="1" class="form-control item-quantity">
                  <input type="hidden" name="subtotal" class="form-control item-subtotal" readonly>
                  <span class="input-group-append">
                     <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                  </span>
                 
                </div>
                </div>

                <div class="card">

                   <div class="input-group">
                    <div class="input-group-prepend">
                    <span class="input-group-text">Item 3</span>
                  </div>
                  <div class="input-group-prepend">
                    <span class="input-group-text">PHP </span>
                  </div>
                  <input type="text" name="price" readonly min=1 value="100" class="form-control item-price">
                  <input type="number" name="count" min="1" value="1" class="form-control  item-quantity">
                  <input type="hidden" name="subtotal" class="form-control item-subtotal" readonly>
                  <span class="input-group-append">
                     <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                  </span>
                 
                </div>
                </div>

              
              </div>
              <div class="card-footer">

                Subotal: <p id="totalValue" style="float: right; margin: 0">PHP 0.00</p><br> 
                Discount:
                 <div class="custom-control custom-checkbox" style="float: right;">
                          <input class="custom-control-input" type="checkbox" id="senior" name="senior" value="0.15" >
                          <label for="senior" class="custom-control-label">Senior Citizen</label>
                        </div><br>
                Payment: <input type="number" name="payment" style="float: right; margin: 0" value=0 min=0 placeholder="Payment" class="form-control form-control-sm col-3"><br><br>
                Total: <p id="finalTotal" style="float: right; margin: 0">PHP 0.00</p> <br>
                Change: <p id="change" style="float: right; margin: 0">PHP 0.00</p>
                            <div style="margin-top: 10px; text-align: center;">
                             <button id="clearButton" class="btn btn-danger" style="float: left">Clear List</button>
                             <button id="printButton" class="btn btn-primary" style="float: right">Print</button>
                           </div>
              </div>

            </div>
            </div>
            <!-- End Print -->


 
          </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<script>
  // Get the container for cup size choices
  const cupSizeSection = document.getElementById("cupSizeSection");

  // Function to show cup size choices
  function showCupSizeChoices(itemName) {
    // Define cup size options based on the selected item
    let cupSizeOptions = "";
    if (itemName === "Matcha") {
      cupSizeOptions = `

      <h3 class="card-title">Matca > Cup Size</h3>
      <div class="row"  style="justify-content: center">
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/12oz.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>12Oz.Matcha</b></p>
                      <p style="margin: 0"><b>PHP 45</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
        
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/160z.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>16Oz.Matcha</b></p>
                      <p style="margin: 0"><b>PHP 85</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
        
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/20oz.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>20Oz.Matcha</b></p>
                      <p style="margin: 0"><b>PHP 115</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
                    </div>
      `;
    } else if (itemName === "Hot Coffee") {
      cupSizeOptions = `
        <h3 class="card-title">Hot Coffee > Cup Size</h3>
      <div class="row"  style="justify-content: center">
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/12oz.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>12Oz.HCoffee</b></p>
                      <p style="margin: 0"><b>PHP 40</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
        
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/160z.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>16Oz.HCoffee</b></p>
                      <p style="margin: 0"><b>PHP 70</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
        
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/20oz.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>20Oz.HCoffee</b></p>
                      <p style="margin: 0"><b>PHP 90</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
                    </div>
      `;
    } else if (itemName === "Iced Coffee") {
      cupSizeOptions = `
        <h3 class="card-title">Iced Coffee > Cup Size</h3>
      <div class="row"  style="justify-content: center">
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/12oz.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>12Oz.ICoffee</b></p>
                      <p style="margin: 0"><b>PHP 45</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
        
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/160z.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>16Oz.ICoffee</b></p>
                      <p style="margin: 0"><b>PHP 75</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
        
        <div class="drinks card col-3" style="text-align: center; margin: 5px">
                       
                      <div class="card-header"><img src="dist/img/20oz.png" class="card-img"></div>
                      
                      <div class="card-body"><p style="margin: 0"><b>20Oz.ICoffee</b></p>
                      <p style="margin: 0"><b>PHP 95</b></p>
                      <button class="itembtn btn btn-success btn-tool">Add Item</button>
                </div>
                
                    </div>
                    </div>
      `;
    }

    // Update the content of the cupSizeSection
    cupSizeSection.innerHTML = cupSizeOptions;
  }

  // Add click event listeners to item cards
  const itemCards = document.querySelectorAll(".itembtn.card");
  itemCards.forEach(itemCard => {
    itemCard.addEventListener("click", () => {
      const itemName = itemCard.querySelector(".itembtn.card-body p b").textContent;
      showCupSizeChoices(itemName);
    });
  });
</script>


<script>
    function openTab(evt, tabName) {
      // Get all tab content elements
      const tabContents = document.getElementsByClassName('tab-content');

      // Hide all tab contents
      for (let i = 0; i < tabContents.length; i++) {
        tabContents[i].style.display = 'none';
      }

      // Remove 'active' class from all tab links
      const tabLinks = document.getElementsByClassName('tab-link');
      for (let i = 0; i < tabLinks.length; i++) {
        tabLinks[i].classList.remove('active');
      }

      // Show the selected tab content
      document.getElementById(tabName).style.display = 'block';

      // Add 'active' class to the clicked tab link
      evt.currentTarget.classList.add('active');
    }

// Function to generate a random order number between 1 and 100
function generateOrderNumber() {
  return Math.floor(Math.random() * 100) + 1;
}

// Function to get the value of the selected radio button
function getSelectedRadioValue() {
  const radioButtons = document.getElementsByName("dine");
  for (const radioButton of radioButtons) {
    if (radioButton.checked) {
      return radioButton.value;
    }
  }
  return null; // Return null if no radio button is selected
}

// Function to print the selected items and total
function printReceipt() {
  const customerName = document.querySelector("input[name=customername]").value;
  const selectedItems = document.querySelectorAll("#selectedItemsCard .card");
  const orderNumber = generateOrderNumber(); // Generate order number
  // Get the selected dine value
  const selectedDineValue = getSelectedRadioValue();

  const seniorDiscount = document.getElementById("senior").checked ? true : false;
  const paymentValue = parseFloat(document.querySelector("input[name=payment]").value);
  const finalTotalValue = document.getElementById("finalTotal").textContent;
  const changeValue = document.getElementById("change").textContent;

  let printContent = `
    <style>
    *{
      text-align: center;
    }
      @media print {
        body {
          width: 80mm; /* Set the width of the paper */
        }
        .header {
          text-align: center;
          margin-bottom: 10px;
        }
        .logo {
          width: 50px;
          height: 50px;
        }
        table {
          width: 100%;
          border-collapse: collapse;
        }
        th, td {
          border: none; /* Remove the border */
          padding: 5px;
          text-align: left;
        }
      }
    </style>
    <div class="header">
      <img class="logo" src="dist/img/AdminLTELogo.png" alt="Logo">
      <h2>High-Coffee</h2>
    </div>
    <h3>Customer Name: ${customerName}</h3>
    <p>Order Number: ${orderNumber}</p>
    <p>Selected Dine: ${selectedDineValue}</p>
    <table>
      <tr>
        <th>Item</th>
        <th>Price</th>
        <th></th>
      </tr>
  `;

  // Loop through each selected item and fetch its data
  selectedItems.forEach((selectedItem) => {
    const itemName = selectedItem.querySelector(".input-group-text").textContent;
    const itemPrice = selectedItem.querySelector(".item-price").value;
    const itemQuantity = selectedItem.querySelector(".item-quantity").value;
    itemPriceClean = itemPrice.replace("PHP ", "");

    // Add a new row to the table for each item
    printContent += `
      <tr>
        <td>${itemName}</td>
        <td>PHP ${itemPrice}x${itemQuantity}</td>
        <td>`+ itemPriceClean*itemQuantity +`</td>
      </tr>
    `;
  });

  // Fetch the total value
  const totalValue = document.getElementById("totalValue").textContent;

  // Add the total row to the table
  printContent += `
      <tr>
        <td colspan="2">Subtotal</td>
        <td>${totalValue}</td>
      </tr>`

      if (seniorDiscount) {
    printContent += `
      <tr>
        <td colspan="2">Discount</td>
        <td>-15%</td>
      </tr>
    `;
  }

      printContent += `
      <tr>
        <td colspan="2">Payment</td>
        <td>PHP ${paymentValue.toFixed(2)}</td>
      </tr>
      <tr>
        <td colspan="2">Total</td>
        <td>${finalTotalValue}</td>
      </tr>
      <tr>
        <td colspan="2">Change</td>
        <td>${changeValue}</td>
      </tr>

    </table>
  `;

  // Create a new window for printing
  const printWindow = window.open("", "");
  printWindow.document.open();
  printWindow.document.write(printContent);
  printWindow.document.close();

  // Print the content
  printWindow.print();

  printWindow.close();
}

// Add click event listener to the print button
const printButton = document.getElementById("printButton");
printButton.addEventListener("click", printReceipt);


  </script>

<script>

  document.addEventListener("DOMContentLoaded", function () {
    const itemList = document.getElementById("itemList");
    const selectedItemsCard = document.getElementById("selectedItemsCard");
    const calculateTotalButton = document.getElementById("calculateTotalButton");
    let newItemCount = 0; // Counter for newly added item cards

    // Function to calculate and update total
    function updateTotal() {
      const subtotalInputs = document.querySelectorAll(".item-subtotal");
      let total = 0;

      subtotalInputs.forEach((subtotalInput) => {
        const subtotalValue = parseFloat(subtotalInput.value.replace("PHP ", ""));
        if (!isNaN(subtotalValue)) {
          total += subtotalValue;
        }
      });

      const totalValueElement = document.getElementById("totalValue");
      totalValueElement.textContent = `PHP ${total.toFixed(2)}`;
    }

    // Add a click event listener to the itemList to handle button clicks
itemList.addEventListener("click", function (event) {
  // Check if the clicked element is a button
  if (event.target.classList.contains("itembtn")) {
    // Get the clicked button
    const button = event.target.closest(".card");

    // Get the item name and price from the button
    const itemName = button.querySelector(".card-body p:nth-of-type(1) b").textContent;
    let itemPrice = button.querySelector(".card-body p:nth-of-type(2) b").textContent;

    // Remove "PHP " from the item price
    itemPrice = itemPrice.replace("PHP ", "");

    // Check if the item already exists in the selected items
    const existingItem = Array.from(selectedItemsCard.getElementsByClassName("input-group-text")).find(item => item.textContent === itemName);
    
    if (!existingItem) {
      // Create a new div to represent the selected item
      const selectedDiv = document.createElement("div");
      selectedDiv.className = "card";
        selectedDiv.innerHTML = `
          <div class="input-group">
                    <div class="input-group-prepend">
                    <span class="input-group-text">${itemName}</span>
                  </div>
                  <div class="input-group-prepend">
                    <span class="input-group-text">PHP </span>
                  </div>
                  <input type="text" name="price" readonly min=1 value="${itemPrice}" class="form-control item-price">
                  <input type="number" name="count" min="1" value="1" class="form-control  item-quantity">
                  <input type="hidden" name="subtotal" class="form-control item-subtotal" readonly>
                  <span class="input-group-append">
                     <button type="button" class="btn btn-tool" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                  </span>
                 
                </div>
        `;

        // Append the selected item to the selectedItemsCard
      selectedItemsCard.appendChild(selectedDiv);
      // Attach event listeners to the newly added item card
      attachItemCardEventListeners(selectedDiv);

      // Update subtotal and total when a new item is added
      calculateSubtotal(selectedDiv);
      updateTotal();

      // Add event listener to update the subtotal when quantity changes
      const quantityInput = selectedDiv.querySelector(".item-quantity");
      quantityInput.addEventListener("input", () => calculateSubtotal(selectedDiv));
    }
  }
});

    // Function to calculate the subtotal for each item
    function calculateSubtotal(itemCard) {
    const priceInput = itemCard.querySelector(".item-price");
    const quantityInput = itemCard.querySelector(".item-quantity");
    const subtotalInput = itemCard.querySelector(".item-subtotal");

    const price = parseFloat(priceInput.value);
    const quantity = parseInt(quantityInput.value);

    if (isNaN(price) || isNaN(quantity)) {
      subtotalInput.value = "0.00";
    } else {
      const subtotal = (price * quantity).toFixed(2);
      subtotalInput.value = `PHP ${subtotal}`;
    }

    updateTotal(); // Update the total value whenever the subtotal changes
  }

    // Encapsulated function to attach event listeners to an item card
function attachItemCardEventListeners(itemCard) {
  const quantityInput = itemCard.querySelector(".item-quantity");
  quantityInput.addEventListener("input", () => calculateSubtotal(itemCard));

  const removeButton = itemCard.querySelector(".btn-tool");
  removeButton.addEventListener("click", () => {
    const subtotalInput = itemCard.querySelector(".item-subtotal");
    const subtotalValue = parseFloat(subtotalInput.value.replace("PHP ", ""));
    if (!isNaN(subtotalValue)) {
      const totalValueElement = document.getElementById("totalValue");
      const currentTotal = parseFloat(totalValueElement.textContent.replace("PHP ", ""));
      const newTotal = currentTotal - subtotalValue;
      totalValueElement.textContent = `PHP ${newTotal.toFixed(2)}`;
    }

    itemCard.remove();
    updateTotal();
  });
}

    // Get all item cards
    const itemCards = document.querySelectorAll(".card .input-group");

    // Calculate the initial subtotals
    itemCards.forEach(calculateSubtotal);

    // Function to update the total value
function updateTotal() {
  const subtotalInputs = document.querySelectorAll(".item-subtotal");
  let total = 0;

  subtotalInputs.forEach((subtotalInput) => {
    const subtotalValue = parseFloat(subtotalInput.value.replace("PHP ", ""));
    if (!isNaN(subtotalValue)) {
      total += subtotalValue;
    }
  });

  const totalValueElement = document.getElementById("totalValue");
  totalValueElement.textContent = `PHP ${total.toFixed(2)}`;

  // Recalculate the final total based on the updated total value
  calculateFinalTotal();
}

    // Add event listeners to update subtotals when quantity changes
    itemCards.forEach((itemCard) => {
    const quantityInput = itemCard.querySelector(".item-quantity");
    quantityInput.addEventListener("input", () => calculateSubtotal(itemCard));

    // Add event listener to remove the item card
    const removeButton = itemCard.querySelector(".btn-tool");
    removeButton.addEventListener("click", () => {
      const subtotalInput = itemCard.querySelector(".item-subtotal");
      const subtotalValue = parseFloat(subtotalInput.value.replace("PHP ", ""));
      if (!isNaN(subtotalValue)) {
        // Subtract the subtotal of the removed item from the total
        const totalValueElement = document.getElementById("totalValue");
        const currentTotal = parseFloat(totalValueElement.textContent.replace("PHP ", ""));
        const newTotal = currentTotal - subtotalValue;
        totalValueElement.textContent = `PHP ${newTotal.toFixed(2)}`;
      }

      // Remove the item card from the DOM
      itemCard.parentElement.remove();
      updateTotal();
    });
   });

    // Add event listener to the discount checkbox
const discountCheckbox = document.getElementById("senior");
discountCheckbox.addEventListener("change", () => calculateFinalTotal());

// Function to calculate the final total
function calculateFinalTotal() {
  const totalValueElement = document.getElementById("totalValue");
  const finalTotalElement = document.getElementById("finalTotal");
  const discountCheckbox = document.getElementById("senior");
  const paymentInput = document.getElementsByName("payment")[0];
  
  const discount = discountCheckbox.checked ? parseFloat(discountCheckbox.value) : 0;
  const totalValue = parseFloat(totalValueElement.textContent.replace("PHP ", ""));
  const payment = parseFloat(paymentInput.value);
  const finalTotal = (totalValue - (totalValue * discount)).toFixed(2);

  finalTotalElement.textContent = `PHP ${finalTotal}`;

  if (!isNaN(payment)) {
    const changeElement = document.getElementById("change");
    const change = (payment - finalTotal).toFixed(2);
    changeElement.textContent = `PHP ${change}`;
  }
}

// Add event listener to payment input
const paymentInput = document.getElementsByName("payment")[0];
paymentInput.addEventListener("input", () => calculateFinalTotal());

// Call calculateFinalTotal initially to set the final total and change to default values
calculateFinalTotal();

    // Call the updateTotal function initially to set the total to 0.00
    updateTotal();
  });

// Function to clear the selected items list
function clearList() {
  location.reload(true);
}
// Add click event listener to the clear button
const clearButton = document.getElementById("clearButton");
clearButton.addEventListener("click", clearList);
</script>

      </div>
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer">
    <div class="float-right d-none d-sm-block">
      <b>W.I.P</b>
    </div>
    <strong>Copyright &copy; <a href="facebook.com/unknown412">Mariñas Dev</a>.</strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->
<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- overlayScrollbars -->
<script src="plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.js"></script>

<!-- PAGE PLUGINS -->
<!-- jQuery Mapael -->
<script src="plugins/jquery-mousewheel/jquery.mousewheel.js"></script>
<script src="plugins/raphael/raphael.min.js"></script>
<script src="plugins/jquery-mapael/jquery.mapael.min.js"></script>
<script src="plugins/jquery-mapael/maps/usa_states.min.js"></script>
<!-- ChartJS -->
<script src="plugins/chart.js/Chart.min.js"></script>

<script src="dist/js/demo.js"></script>

<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="dist/js/pages/dashboard2.js"></script>

</body>
</html>
